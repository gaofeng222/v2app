{"version":3,"file":"js/625.ba55d6a4.js","mappings":"sJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,cAAc,CAACA,EAAG,KAAK,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,SAAUC,WAAW,eAAe,CAACR,EAAIS,GAAG,eAAeP,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,SAAUC,WAAW,eAAe,CAACR,EAAIS,GAAG,aAAaP,EAAG,KAAK,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,UAAWC,WAAW,gBAAgB,CAACR,EAAIS,GAAG,gBAAgBP,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,UAAWC,WAAW,gBAAgB,CAACR,EAAIS,GAAG,aAAaP,EAAG,KAAK,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,QAAS,UAAWC,WAAW,yBAAyB,CAACR,EAAIS,GAAG,uBAAuBP,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,CAAC,QAAS,UAAWC,WAAW,yBAAyB,CAACR,EAAIS,GAAG,eACv6B,EACIC,EAAkB,G,UCAtB,SAASC,EAAgBC,EAAIC,GAC3B,MAAM,MAAEN,GAAUM,GACZ,MAAEC,GAAUC,EAAAA,EAAMC,QAExB,KAAIT,GAASA,aAAiBU,OAU5B,MAAM,IAAIC,MAAO,wDATjB,GAAIX,EAAMY,OAAS,EAAG,CACpB,MAAMC,EAAkBb,EAClBc,EAAgBP,EAAMQ,MAAMC,GAASH,EAAgBI,SAASD,KAE/DF,GACHT,EAAGa,YAAcb,EAAGa,WAAWC,YAAYd,EAE/C,CAIJ,CAEA,OACEe,QAAAA,CAASf,EAAIC,GACXF,EAAgBC,EAAIC,EACtB,EACAe,MAAAA,CAAOhB,EAAIC,GACTF,EAAgBC,EAAIC,EACtB,GCPF,GACAT,WAAA,CAAAyB,WAAAA,ICpBsQ,I,UCOlQC,GAAY,OACd,EACA/B,EACAW,GACA,EACA,KACA,KACA,MAIF,EAAeoB,EAAiB,O","sources":["webpack://v2app/./src/views/auth-role/directive/index.vue","webpack://v2app/./src/directives/permission/permission.js","webpack://v2app/src/views/auth-role/directive/index.vue","webpack://v2app/./src/views/auth-role/directive/index.vue?aff1","webpack://v2app/./src/views/auth-role/directive/index.vue?2754"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('g-container',[_c('h2',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin']),expression:\"['admin']\"}]},[_vm._v(\"admin能看到的\")]),_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin']),expression:\"['admin']\"}]},[_vm._v(\"我是管理员\")])]),_c('h2',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['editor']),expression:\"['editor']\"}]},[_vm._v(\"editor能看到的\")]),_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['editor']),expression:\"['editor']\"}]},[_vm._v(\"我是编辑员\")])]),_c('h2',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin', 'editor']),expression:\"['admin', 'editor']\"}]},[_vm._v(\"admin,editor都能看到的\")]),_c('div',[_c('span',{directives:[{name:\"permission\",rawName:\"v-permission\",value:(['admin', 'editor']),expression:\"['admin', 'editor']\"}]},[_vm._v(\"我是公共部分\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import store from '@/store'\r\n\r\nfunction checkPermission(el, binding) {\r\n  const { value } = binding\r\n  const { roles } = store.getters\r\n\r\n  if (value && value instanceof Array) {\r\n    if (value.length > 0) {\r\n      const permissionRoles = value\r\n      const hasPermission = roles.some((role) => permissionRoles.includes(role))\r\n\r\n      if (!hasPermission) {\r\n        el.parentNode && el.parentNode.removeChild(el)\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error(`need roles! Like v-permission=\"['admin','editor']\"`)\r\n  }\r\n}\r\n\r\nexport default {\r\n  inserted(el, binding) {\r\n    checkPermission(el, binding)\r\n  },\r\n  update(el, binding) {\r\n    checkPermission(el, binding)\r\n  }\r\n}\r\n","<template>\r\n  <g-container>\r\n    <h2 v-permission=\"['admin']\">admin能看到的</h2>\r\n    <div>\r\n      <span v-permission=\"['admin']\">我是管理员</span>\r\n    </div>\r\n    <h2 v-permission=\"['editor']\">editor能看到的</h2>\r\n    <div>\r\n      <span v-permission=\"['editor']\">我是编辑员</span>\r\n    </div>\r\n    <h2 v-permission=\"['admin', 'editor']\">admin,editor都能看到的</h2>\r\n    <div>\r\n      <span v-permission=\"['admin', 'editor']\">我是公共部分</span>\r\n    </div>\r\n  </g-container>\r\n</template>\r\n\r\n<script>\r\nimport { permission } from '@/directives/permission/index.js' // 权限判断指令\r\nexport default {\r\n  directives: { permission }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=020a6fc4\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","expression","_v","staticRenderFns","checkPermission","el","binding","roles","store","getters","Array","Error","length","permissionRoles","hasPermission","some","role","includes","parentNode","removeChild","inserted","update","permission","component"],"sourceRoot":""}